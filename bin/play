#!/usr/bin/env ruby
require 'active_support'
require 'active_support/core_ext/hash'
require 'game'
require 'json'
require 'optparse'
require 'yaml'
require 'erb'

def user_config
  @user_config ||= Game::Config.config
end

@options = {}
OptionParser.new do |opts|
  # opts.on('--environment env') { |arg| @options[:environment] = arg }
  opts.on('-h', '--help') do
    puts opts
    exit
  end
end.parse!

user_config.each do |game, input_values|
  @play = Game::Config.new(input_values)
  game_result = @play.start
  game_result.each do |result|
    p "Player Id: #{result[:player_id]}"
    p "Player Worth: #{result[:total_worth]}"
  end
end
